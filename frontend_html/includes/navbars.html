<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Navbars SIGMA-Cadastro</title>
</head>
<body>

<!-- NAVBAR 1: Usuário Logado - Página Dashboard -->
<nav class="navbar navbar-expand-lg pli-navbar" id="navbar-dashboard">
    <div class="container">
        <a class="navbar-brand text-pli-azul-escuro" href="dashboard.html">
            <i class="fas fa-users-cog"></i> SIGMA-Cadastro
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarDashboard" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarDashboard">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link active" href="dashboard.html">
                        <i class="fas fa-tachometer-alt"></i> Dashboard
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="pessoa-fisica.html">
                        <i class="fas fa-user"></i> Pessoa Física
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="pessoa-juridica.html">
                        <i class="fas fa-building"></i> Pessoa Jurídica
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="usuarios.html">
                        <i class="fas fa-users"></i> Usuários
                    </a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fas fa-user-circle"></i> <span id="userName">Usuário</span>
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="meus-dados.html"><i class="fas fa-id-card"></i> Meus Dados</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Sair</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- NAVBAR 2: Usuário Logado - Demais Páginas -->
<nav class="navbar navbar-expand-lg pli-navbar" id="navbar-internal">
    <div class="container">
        <a class="navbar-brand text-pli-azul-escuro" href="dashboard.html">
            <i class="fas fa-users-cog"></i> SIGMA-Cadastro
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarInternal" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarInternal">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" href="dashboard.html">
                        <i class="fas fa-tachometer-alt"></i> Dashboard
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="pessoa-fisica.html">
                        <i class="fas fa-user"></i> Pessoa Física
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="pessoa-juridica.html">
                        <i class="fas fa-building"></i> Pessoa Jurídica
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="usuarios.html">
                        <i class="fas fa-users"></i> Usuários
                    </a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownInternal" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fas fa-user-circle"></i> <span id="userNameInternal">Usuário</span>
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdownInternal">
                        <li><a class="dropdown-item" href="meus-dados.html"><i class="fas fa-id-card"></i> Meus Dados</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Sair</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- NAVBAR 3: Usuário Não Logado - Página Inicial -->
<nav class="navbar navbar-expand-lg pli-navbar" id="navbar-public">
    <div class="container">
        <a class="navbar-brand text-pli-azul-escuro" href="index.html">
            <i class="fas fa-users-cog"></i> SIGMA-Cadastro
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarPublic" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarPublic">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" href="index.html">
                        <i class="fas fa-home"></i> Início
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="recursos.html">
                        <i class="fas fa-cogs"></i> Recursos
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="sobre.html">
                        <i class="fas fa-info-circle"></i> Sobre
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link btn-pli-confirm ms-2 px-3" href="login.html">
                        <i class="fas fa-sign-in-alt"></i> Acesso ao Sistema
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- Script para funções comuns -->
<script>
function logout() {
    if (confirm('Deseja realmente sair do sistema?')) {
        // Limpar dados do localStorage/sessionStorage
        localStorage.removeItem('userToken');
        localStorage.removeItem('userData');
        sessionStorage.clear();
        
        // Fazer logout na API
        fetch('/api/auth/logout', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': 'Bearer ' + localStorage.getItem('userToken')
            }
        }).finally(() => {
            // Redirecionar para página inicial
            window.location.href = 'index.html';
        });
    }
}

// Função para carregar nome do usuário logado
function loadUserName() {
    const userData = JSON.parse(localStorage.getItem('userData') || '{}');
    const userNameElements = document.querySelectorAll('#userName, #userNameInternal');
    userNameElements.forEach(element => {
        if (element) {
            element.textContent = userData.nome || 'Usuário';
        }
    });
}

// Carregar nome do usuário quando a página carregar
document.addEventListener('DOMContentLoaded', loadUserName);
</script>

</body>
</html>
