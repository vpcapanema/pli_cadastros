<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selecionar Perfil - SIGMA-PLI | Módulo de Gerenciamento de Cadastros</title>
  
    <!-- Bootstrap 5.1.3 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  
    <!-- Font Awesome 6.0.0 -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  
    <!-- Google Fonts - Montserrat -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  
    <!-- CSS SIGMA-PLI Obrigatório -->
    <link rel="stylesheet" href="/static/css/main.css">
</head>
<body class="p-selecionar-perfil">
    <!-- Navegação -->
    
    <!-- Navegação -->
    <div id="navbar-container">
        <!-- O navbar será carregado aqui via JavaScript -->
    </div>
    
    <script src="/static/js/navbar-loader.js"></script>
    <script>
        // Carrega o navbar compartilhado
        document.addEventListener('DOMContentLoaded', function() {
            fetch('/views/components/navbar.html')
                .then(response => response.text())
                .then(html => {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    const navbar = doc.querySelector('#navbar-public');
                    document.getElementById('navbar-container').innerHTML = navbar.outerHTML;
                    
                    // Marca o link atual como ativo
                    const currentPath = window.location.pathname;
                    const filename = currentPath.split('/').pop();
                    if (filename) {
                        const navLink = document.querySelector(`#navbar-container .nav-link[href="${filename}"]`);
                        if (navLink) {
                            navLink.classList.add('active');
                        }
                    }
                })
                .catch(error => console.error('Erro ao carregar navbar:', error));
        });
    </script>


    <!-- Área Central -->
    <div class="flex-grow-1 d-flex align-items-center justify-content-center py-5" 
         class="pli-bg-gradient">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-12 col-md-8 col-lg-6">
                    <div class="card border shadow-lg">
                        <div class="card-body p-4">
                            <!-- Logo e Título -->
                            <div class="logo-section">
                                <div class="logo-icon">
                                    <i class="fas fa-user-tag"></i>
                                </div>
                                <h1 class="h3 profile-title">Selecione seu Perfil</h1>
                                <p class="profile-subtitle">Você possui múltiplos perfis de acesso. Selecione um para continuar.</p>
                            </div>

                            <!-- Alertas -->
                            <div id="alertContainer"></div>

                            <!-- Lista de Perfis -->
                            <div id="profilesList" class="mb-4">
                                <!-- Perfis serão carregados dinamicamente -->
                            </div>

                            <!-- Botão de Continuar -->
                            <div class="d-grid">
                                <button class="btn btn-primary btn-lg px-4 btn-continue" id="btnContinue" disabled>>
                                    <i class="fas fa-arrow-right me-2"></i>Continuar
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Informações do Sistema -->
                    <div class="text-center mt-3">
                        <small class="text-muted">
                            SIGMA-PLI v1.0 © 2024 • Módulo de Gerenciamento de Cadastros
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    
    <!-- Footer -->
    <div id="footer-container">
        <!-- O footer será carregado aqui via JavaScript -->
    </div>
    
    <script>
        // Carrega o footer compartilhado
        document.addEventListener('DOMContentLoaded', function() {
            fetch('/views/components/footer.html')
                .then(response => response.text())
                .then(html => {
                    document.getElementById('footer-container').innerHTML = html;
                })
                .catch(error => console.error('Erro ao carregar footer:', error));
        });
    </script>



    <!-- Scripts da Página -->
    <script src="/static/js/core-scripts-loader.js"></script>
    <script src="/static/js/pages/selecionar-perfil.js"></script>
    <script>
        // Garante carregamento do Bootstrap
        PLIScriptLoader.ensureBootstrap().then(() => {
            console.log('Bootstrap carregado para página selecionar-perfil');
        });
    </script>

    <!-- Footer Modularizado -->
    <div id="footer-container"></div>
    <script src="/static/js/footer-loader.js"></script>
</body>
</html>

    <!-- Scripts da Página -->
    <script src="/static/js/core-scripts-loader.js"></script>
    <script src="/static/js/pages/selecionar-perfil.js"></script>
    <script>
        // Garante carregamento do Bootstrap
        PLIScriptLoader.ensureBootstrap().then(() => {
            console.log('Bootstrap carregado para página selecionar-perfil');
        });
    </script>

    <!-- Footer Modularizado -->
    <div id="footer-container"></div>
    <script src="/static/js/footer-loader.js"></script>
</body>
</html>
