{% extends "templates/base.html" %} {% block page_title %}Pessoa Física{% endblock %} {% block additional_css %}
<link href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css" rel="stylesheet" />
{% endblock %} {% block body_class %}p-pessoa-fisica{% endblock %} {% block main_content %}
<!-- Header -->
<div class="row mb-4">
  <div class="col-12">
    <div class="d-flex justify-content-between align-items-center">
      <div>
        <h1 class="h3 mb-1">
          <i class="fas fa-user text-primary"></i>
          Cadastro de Pessoa Física
        </h1>
        <p class="text-muted mb-0">
          Gerencie os cadastros de pessoas físicas do SIGMA-PLI - Módulo de Gerenciamento de Cadastros
        </p>
      </div>
      <button class="btn btn-primary btn-lg px-4" data-bs-toggle="modal" data-bs-target="#pessoaFisicaModal">
        <i class="fas fa-plus me-2"></i>Novo Cadastro
      </button>
    </div>
  </div>
</div>

<!-- Filtros -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card-header">
        <h5 class="card-title mb-0"><i class="fas fa-filter"></i> Filtros de Busca</h5>
      </div>
      <div class="card-body">
        <div class="row g-3">
          <div class="col-md-3">
            <label for="filtroNome" class="form-label">Nome</label>
            <input type="text" class="form-control" id="filtroNome" placeholder="Nome completo" />
          </div>
          <div class="col-md-3">
            <label for="filtroCPF" class="form-label">CPF</label>
            <input type="text" class="form-control" id="filtroCPF" placeholder="000.000.000-00" />
          </div>
          <div class="col-md-3">
            <label for="filtroStatus" class="form-label">Status</label>
            <select class="form-select" id="filtroStatus">
              <option value="">Todos</option>
              <option value="ativo">Ativo</option>
              <option value="inativo">Inativo</option>
              <option value="pendente">Pendente</option>
            </select>
          </div>
          <div class="col-md-3">
            <label for="filtroDataCadastro" class="form-label">Data de Cadastro</label>
            <input type="date" class="form-control" id="filtroDataCadastro" />
          </div>
        </div>
        <div class="d-flex justify-content-end mt-3">
          <button class="btn btn-outline-secondary me-2"><i class="fas fa-eraser me-2"></i>Limpar</button>
          <button class="btn btn-primary"><i class="fas fa-search me-2"></i>Buscar</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Listagem de Pessoas -->
<div class="row">
  <div class="col-12">
    <div class="card">
      <div class="card-header">
        <h5 class="card-title mb-0"><i class="fas fa-list"></i> Pessoas Físicas Cadastradas</h5>
      </div>
      <div class="card-body">
        <div class="table-responsive">
          <table id="pessoaFisicaTable" class="table table-striped table-hover">
            <thead class="table-light">
              <tr>
                <th>Nome</th>
                <th>CPF</th>
                <th>E-mail</th>
                <th>Telefone</th>
                <th>Status</th>
                <th>Data Cadastro</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody>
              <!-- Os dados serão carregados via JavaScript -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal de Cadastro/Edição -->
<div
  class="modal fade"
  id="pessoaFisicaModal"
  tabindex="-1"
  aria-labelledby="pessoaFisicaModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="pessoaFisicaModalLabel"><i class="fas fa-user"></i> Cadastro de Pessoa Física</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
      </div>
      <div class="modal-body">
        <form id="pessoaFisicaForm" class="needs-validation" novalidate>
          <input type="hidden" id="pessoaId" />

          <!-- Abas do Formulário -->
          <ul class="nav nav-tabs mb-4" id="pessoaFisicaTab" role="tablist">
            <li class="nav-item" role="presentation">
              <button
                class="nav-link active"
                id="dados-pessoais-tab"
                data-bs-toggle="tab"
                data-bs-target="#dados-pessoais"
                type="button"
                role="tab"
                aria-controls="dados-pessoais"
                aria-selected="true"
              >
                <i class="fas fa-id-card"></i> Dados Pessoais
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button
                class="nav-link"
                id="endereco-tab"
                data-bs-toggle="tab"
                data-bs-target="#endereco"
                type="button"
                role="tab"
                aria-controls="endereco"
                aria-selected="false"
              >
                <i class="fas fa-map-marker-alt"></i> Endereço
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button
                class="nav-link"
                id="contato-tab"
                data-bs-toggle="tab"
                data-bs-target="#contato"
                type="button"
                role="tab"
                aria-controls="contato"
                aria-selected="false"
              >
                <i class="fas fa-phone"></i> Contatos
              </button>
            </li>
          </ul>

          <!-- Conteúdo das Abas -->
          <div class="tab-content" id="pessoaFisicaTabContent">
            <!-- Aba Dados Pessoais -->
            <div
              class="tab-pane fade show active"
              id="dados-pessoais"
              role="tabpanel"
              aria-labelledby="dados-pessoais-tab"
            >
              <div class="row g-3">
                <div class="col-md-8">
                  <label for="nome" class="form-label">Nome Completo *</label>
                  <input type="text" class="form-control" id="nome" required />
                  <div class="invalid-feedback">Nome completo é obrigatório.</div>
                </div>
                <div class="col-md-4">
                  <label for="cpf" class="form-label">CPF *</label>
                  <input type="text" class="form-control" id="cpf" placeholder="000.000.000-00" required />
                  <div class="invalid-feedback">CPF válido é obrigatório.</div>
                </div>

                <div class="col-md-4">
                  <label for="dataNascimento" class="form-label">Data de Nascimento</label>
                  <input type="date" class="form-control" id="dataNascimento" />
                </div>
                <div class="col-md-4">
                  <label for="genero" class="form-label">Gênero</label>
                  <select class="form-select" id="genero">
                    <option value="" selected>Selecione</option>
                    <option value="masculino">Masculino</option>
                    <option value="feminino">Feminino</option>
                    <option value="outro">Outro</option>
                    <option value="nao_informar">Prefiro não informar</option>
                  </select>
                </div>
                <div class="col-md-4">
                  <label for="estadoCivil" class="form-label">Estado Civil</label>
                  <select class="form-select" id="estadoCivil">
                    <option value="" selected>Selecione</option>
                    <option value="solteiro">Solteiro(a)</option>
                    <option value="casado">Casado(a)</option>
                    <option value="divorciado">Divorciado(a)</option>
                    <option value="viuvo">Viúvo(a)</option>
                    <option value="uniao_estavel">União Estável</option>
                  </select>
                </div>

                <div class="col-md-6">
                  <label for="nacionalidade" class="form-label">Nacionalidade</label>
                  <input type="text" class="form-control" id="nacionalidade" value="Brasileira" />
                </div>
                <div class="col-md-6">
                  <label for="naturalidade" class="form-label">Naturalidade</label>
                  <input type="text" class="form-control" id="naturalidade" placeholder="Cidade de nascimento" />
                </div>
              </div>
            </div>

            <!-- Aba Endereço -->
            <div class="tab-pane fade" id="endereco" role="tabpanel" aria-labelledby="endereco-tab">
              <div class="row g-3">
                <div class="col-md-3">
                  <label for="cep" class="form-label">CEP</label>
                  <div class="input-group">
                    <input type="text" class="form-control" id="cep" placeholder="00000-000" />
                    <button class="btn btn-outline-primary" type="button" id="buscarCep">
                      <i class="fas fa-search"></i>
                    </button>
                  </div>
                </div>
                <div class="col-md-7">
                  <label for="logradouro" class="form-label">Logradouro</label>
                  <input type="text" class="form-control" id="logradouro" />
                </div>
                <div class="col-md-2">
                  <label for="numero" class="form-label">Número</label>
                  <input type="text" class="form-control" id="numero" />
                </div>

                <div class="col-md-4">
                  <label for="complemento" class="form-label">Complemento</label>
                  <input type="text" class="form-control" id="complemento" />
                </div>
                <div class="col-md-4">
                  <label for="bairro" class="form-label">Bairro</label>
                  <input type="text" class="form-control" id="bairro" />
                </div>
                <div class="col-md-4">
                  <label for="cidade" class="form-label">Cidade</label>
                  <input type="text" class="form-control" id="cidade" />
                </div>

                <div class="col-md-4">
                  <label for="estado" class="form-label">Estado</label>
                  <select class="form-select" id="estado">
                    <option value="" selected>Selecione</option>
                    <option value="AC">Acre</option>
                    <option value="AL">Alagoas</option>
                    <!-- Outros estados -->
                  </select>
                </div>
                <div class="col-md-8">
                  <label for="referencia" class="form-label">Ponto de Referência</label>
                  <input type="text" class="form-control" id="referencia" />
                </div>
              </div>
            </div>

            <!-- Aba Contatos -->
            <div class="tab-pane fade" id="contato" role="tabpanel" aria-labelledby="contato-tab">
              <div class="row g-3">
                <div class="col-md-6">
                  <label for="email" class="form-label">E-mail Principal</label>
                  <input type="email" class="form-control" id="email" />
                </div>
                <div class="col-md-6">
                  <label for="emailSecundario" class="form-label">E-mail Secundário</label>
                  <input type="email" class="form-control" id="emailSecundario" />
                </div>

                <div class="col-md-6">
                  <label for="telefone" class="form-label">Telefone Principal</label>
                  <input type="text" class="form-control" id="telefone" placeholder="(00) 00000-0000" />
                </div>
                <div class="col-md-6">
                  <label for="telefoneSecundario" class="form-label">Telefone Secundário</label>
                  <input type="text" class="form-control" id="telefoneSecundario" placeholder="(00) 00000-0000" />
                </div>

                <div class="col-12">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="autorizaContato" />
                    <label class="form-check-label" for="autorizaContato">
                      Autorizo contato por e-mail e telefone para fins de comunicação oficial
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
          <i class="fas fa-times me-2"></i>Cancelar
        </button>
        <button type="button" class="btn btn-primary" id="salvarPessoaFisica">
          <i class="fas fa-save me-2"></i>Salvar
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal de Confirmação de Exclusão -->
<div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title">Confirmar Exclusão</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Fechar"></button>
      </div>
      <div class="modal-body">
        <p>Tem certeza que deseja excluir o cadastro de <strong id="deletePersonName"></strong>?</p>
        <p class="mb-0">Esta ação não pode ser desfeita.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-danger" id="confirmDeleteBtn">
          <i class="fas fa-trash-alt me-2"></i>Excluir
        </button>
      </div>
    </div>
  </div>
</div>
{% endblock %} {% block additional_js %}
<script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>
<script src="/static/js/pages/pessoa-fisica.js"></script>
{% endblock %}
